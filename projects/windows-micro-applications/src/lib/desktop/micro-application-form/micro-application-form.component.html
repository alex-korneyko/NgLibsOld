<div style="position: absolute"
     [id]="microApplicationForm.id"
     [ngStyle]="{
      'width': microApplicationForm.isFullScreen ? '100%' : microApplicationForm.xSize + 10 + 'px',
      'height': microApplicationForm.isFullScreen ? '100%' : microApplicationForm.ySize + 10 + 'px',
      'left': microApplicationForm.isFullScreen ? '0px' : microApplicationForm.xPos - 5 + 'px',
      'top': microApplicationForm.isFullScreen ? '0px' : microApplicationForm.yPos - 5 + 'px',
      'z-index': microApplicationForm.zPos
     }"
     (mousedown)="WindowAreaClick($event)"
>
  <div class="horizontal-border" draggable="true"
       *ngIf="!microApplicationForm.isFullScreen"
       (drag)="DragTopBorder($event)"
       (dragstart)="HorizontalBorderDragStart($event)"
  ></div>

  <div style="width: 100%; height: calc(100%); display: flex">

    <div class="vertical-border" draggable="true"
         *ngIf="!microApplicationForm.isFullScreen"
         (drag)="DragLeftBorder($event)"
         (dragstart)="VerticalBorderDragStart($event)"
    ></div>

    <div style="width: calc(100%); height: 100%; display: inline-block; box-shadow: 5px 5px 5px dimgray;">

      <div style="width: 100%; height: 25px; display: flex" draggable="true"
           [ngStyle]="{
            'background-color': microApplicationForm.isActive ? '#036e86' : '#b6b6b6'
           }"
           (mousedown)="WindowHeaderMouseDown($event)"
           (mouseup)="WindowHeaderMouseUp($event)"
           (dragstart)="HeaderDragStart($event)"
           >

        <div style="display: block; flex: 1"
             (dblclick)="FullScreenClick($event)"
        >
          <span style="color: white; font-weight: bold; margin-left: 5px">{{microApplicationForm.header}}</span>
        </div>

        <div style="display: block">
          <button class="window-header-btn window-background-btn"
                  (mouseup)="BackgroundClick($event)">
            <i class="fa fa-window-minimize"></i>
          </button>

          <button class="window-header-btn window-fullscreen-btn"
                  *ngIf="!microApplicationForm.isFullScreen"
                  (mouseup)="FullScreenClick($event)">
            <i class="fa fa-window-maximize"></i>
          </button>

          <button class="window-header-btn window-fullscreen-btn"
                  *ngIf="microApplicationForm.isFullScreen"
                  (mouseup)="FullScreenClick($event)">
            <i class="fa fa-window-restore"></i>
          </button>

          <button class="window-header-btn window-close-btn"
                  (mouseup)="CloseClick($event)">
            <i class="fa fa-window-close"></i>
          </button>
        </div>

      </div>

      <div style="width: 100%; height: calc(100% - 25px); background-color: lightgray; border: 1px solid dimgray">

        <ng-template windowContent></ng-template>

      </div>
    </div>

    <div class="vertical-border" draggable="true"
         *ngIf="!microApplicationForm.isFullScreen"
         (drag)="DragRightBorder($event)"
         (dragstart)="VerticalBorderDragStart($event)"
    ></div>
  </div>

  <div class="horizontal-border" draggable="true"
       *ngIf="!microApplicationForm.isFullScreen"
       (drag)="DragBottomBorder($event)"
       (dragstart)="HorizontalBorderDragStart($event)"
  ></div>

</div>

<div style="position: absolute; background-color: black; opacity: .2"
     *ngIf="microApplicationForm.isBlockedByChildren"
     [ngStyle]="{
      'width': microApplicationForm.isFullScreen ? '100%' : microApplicationForm.xSize + 'px',
      'height': microApplicationForm.isFullScreen ? '100%' : microApplicationForm.ySize + 10 + 'px',
      'left': microApplicationForm.isFullScreen ? '0px' : microApplicationForm.xPos + 'px',
      'top': microApplicationForm.isFullScreen ? '0px' : microApplicationForm.yPos + 'px',
      'z-index': microApplicationForm.zPos + 5
     }"
></div>
