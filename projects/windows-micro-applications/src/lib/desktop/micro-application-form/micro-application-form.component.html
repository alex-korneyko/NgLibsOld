<div style="position: absolute"
     [id]="form.id"
     [ngStyle]="{
      'width': form.isMaximized ? '100%' : form.xSize + 10 + 'px',
      'height': form.isMaximized ? '100%' : form.ySize + 10 + 'px',
      'left': form.isMaximized ? '0px' : form.xPos - 5 + 'px',
      'top': form.isMaximized ? '0px' : form.yPos - 5 + 'px',
      'z-index': form.zPos
     }"
     (mousedown)="WindowAreaClick($event)"
>
  <div class="horizontal-border" draggable="true"
       *ngIf="!form.isMaximized && form.isResizable"
       (drag)="DragTopBorder($event)"
       (dragstart)="HorizontalBorderDragStart($event)"
  ></div>

  <div style="width: 100%; height: calc(100%); display: flex">

    <div class="vertical-border" draggable="true"
         *ngIf="!form.isMaximized && form.isResizable"
         (drag)="DragLeftBorder($event)"
         (dragstart)="VerticalBorderDragStart($event)"
    ></div>

    <div style="width: calc(100%); height: 100%; display: inline-block; box-shadow: 5px 5px 5px dimgray;">

      <div style="width: 100%; height: 25px; display: flex" draggable="true"
           [ngStyle]="{
            'background-color': form.isActive ? '#036e86' : '#b6b6b6'
           }"
           (mousedown)="WindowHeaderMouseDown($event)"
           (mouseup)="WindowHeaderMouseUp($event)"
           (dragstart)="HeaderDragStart($event)"
           >

        <div style="display: block; flex: 1" [id]="form.id + '-header-title'"
             (dblclick)="FullScreenClick($event)">
          <span style="color: white; font-weight: bold; margin-left: 5px">{{form.header}}</span>
        </div>

        <div style="display: block">
          <div style="display: flex">
            <button class="window-header-btn window-background-btn"
                    *ngIf="form.allowMinimize"
                    (mouseup)="BackgroundClick($event)">
              <i class="fa fa-window-minimize"></i>
            </button>
            <div style="display: block"
                 *ngIf="form.allowMaximize">
              <button class="window-header-btn window-fullscreen-btn"
                      *ngIf="!form.isMaximized"
                      (mouseup)="FullScreenClick($event)">
                <i class="fa fa-window-maximize"></i>
              </button>

              <button class="window-header-btn window-fullscreen-btn"
                      *ngIf="form.isMaximized"
                      (mouseup)="FullScreenClick($event)">
                <i class="fa fa-window-restore"></i>
              </button>
            </div>
            <button class="window-header-btn window-close-btn"
                    (mouseup)="CloseClick($event)">
              <i class="fa fa-window-close"></i>
            </button>
          </div>
        </div>

      </div>

      <div style="width: 100%; height: calc(100% - 25px); background-color: lightgray; border: 1px solid dimgray">

        <ng-template windowContent></ng-template>

      </div>
    </div>

    <div class="vertical-border" draggable="true"
         *ngIf="!form.isMaximized && form.isResizable"
         (drag)="DragRightBorder($event)"
         (dragstart)="VerticalBorderDragStart($event)"
    ></div>
  </div>

  <div class="horizontal-border" draggable="true"
       *ngIf="!form.isMaximized && form.isResizable"
       (drag)="DragBottomBorder($event)"
       (dragstart)="HorizontalBorderDragStart($event)"
  ></div>

</div>

<div style="position: absolute; background-color: black; opacity: .2"
     *ngIf="form.isBlockedByChildren"
     [ngStyle]="{
      'width': form.isMaximized ? '100%' : form.xSize + 'px',
      'height': form.isMaximized ? '100%' : form.ySize + 10 + 'px',
      'left': form.isMaximized ? '0px' : form.xPos + 'px',
      'top': form.isMaximized ? '0px' : form.yPos + 'px',
      'z-index': form.zPos + 5
     }"
></div>
